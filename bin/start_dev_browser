#!/usr/bin/env bash

cp node_modules/monero-javascript/src/main/js/utils/MoneroWebWorker.js src/MoneroWebWorker_PreBuild.js	# TODO: this goes away when webpack build in monero-javascript
bin/_build_browser_dev;
cp node_modules/monero-javascript/build/monero-javascript-wasm.js browser_build/monero-javascript-wasm.js
cp node_modules/monero-javascript/build/monero-javascript-wasm.wasm browser_build/monero-javascript-wasm.wasm
#cp node_modules/monero-javascript/build/monero-javascript-wasm.worker.js browser_build/monero-javascript-wasm.worker.js
cp -a src/ browser_build/
cp node_modules/mocha/mocha.js browser_build/mocha.js
cp node_modules/mocha/mocha.css browser_build/mocha.css
cd browser_build && python ../bin/run_server.py