#!/usr/bin/env bash

bin/_build_browser_dev;

cp node_modules/monero-javascript/dist/monero_core_wasm.js browser_build/monero_core_wasm.js
cp node_modules/monero-javascript/dist/monero_core_wasm.wasm browser_build/monero_core_wasm.wasm
cp node_modules/monero-javascript/dist/monero_keys_wasm.js browser_build/monero_keys_wasm.js
cp node_modules/monero-javascript/dist/monero_keys_wasm.wasm browser_build/monero_keys_wasm.wasm
cp node_modules/monero-javascript/dist/MoneroWebWorker.dist.js browser_build/MoneroWebWorker.dist.js
cp node_modules/monero-javascript/dist/MoneroWebWorker.dist.js.map browser_build/MoneroWebWorker.dist.js.map
cp -a src/ browser_build/
cp node_modules/mocha/mocha.js browser_build/mocha.js		# TODO: part of monero-javascript test web app?
cp node_modules/mocha/mocha.css browser_build/mocha.css

cd browser_build && python ../bin/run_server.py